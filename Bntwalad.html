<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ù†Øª ÙˆÙ„Ø¯ - Lobby</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f3ff; --neon-pink: #ff007a; --bg: #050a10; }
        body { margin: 0; font-family: 'Cairo', sans-serif; background: var(--bg); color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .card { background: rgba(16, 25, 39, 0.9); backdrop-filter: blur(15px); border: 2px solid var(--neon-blue); border-radius: 25px; padding: 30px; width: 90%; max-width: 450px; text-align: center; }
        
        /* Menu Styles */
        #menu-screen { display: block; }
        .nickname-input { background: #111; border: 1px solid var(--neon-blue); color: white; padding: 15px; border-radius: 12px; width: 80%; margin-bottom: 20px; font-size: 1.1rem; text-align: center; outline: none; }
        
        /* Lobby Styles */
        #lobby-screen { display: none; }
        .player-list { background: rgba(0,0,0,0.4); border-radius: 15px; padding: 15px; margin: 20px 0; text-align: right; }
        .player-item { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #333; }
        .status-ready { color: #2ecc71; font-weight: bold; }
        .status-waiting { color: #aaa; }

        /* Game UI */
        #game-screen { display: none; }
        .field { background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 10px; display: flex; align-items: center; padding: 0 10px; margin-bottom: 8px; }
        .field label { width: 60px; color: var(--neon-blue); font-weight: bold; }
        input.ans { background: transparent; border: none; color: white; width: 100%; padding: 10px; text-align: right; outline: none; }
        
        .btn { width: 100%; padding: 15px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-blue { background: var(--neon-blue); color: black; }
        .btn-pink { background: var(--neon-pink); color: white; }
    </style>
</head>
<body>

<div class="card">
    <div id="menu-screen">
        <h1 style="color: var(--neon-blue);">Ø¨Ù†Øª ÙˆÙ„Ø¯ ONLINE</h1>
        <input type="text" id="nick-input" class="nickname-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±...">
        <button class="btn btn-blue" onclick="joinGame()">Ø¯Ø®ÙˆÙ„ Ù„Ù„ØºØ±ÙØ©</button>
    </div>

    <div id="lobby-screen">
        <h2>Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ğŸ›°ï¸</h2>
        <div class="player-list" id="player-list">
            </div>
        <p id="lobby-msg">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ù‚ÙŠØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (Ù„Ø§Ø²Ù… 2 Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)...</p>
        <button class="btn btn-pink" id="ready-btn" onclick="sendReady()">Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² (Ready)</button>
    </div>

    <div id="game-screen">
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
            <div id="current-letter" style="font-size: 2.5rem; color: var(--neon-blue); font-weight: 900;">ØŸ</div>
            <div id="timer" style="font-size: 1.5rem; color: var(--neon-pink);">60</div>
        </div>
        <div class="input-wrapper">
            <div class="field"><label>Ø¨Ù†Øª</label><input type="text" class="ans"></div>
            <div class="field"><label>ÙˆÙ„Ø¯</label><input type="text" class="ans"></div>
            <div class="field"><label>Ø­ÙŠÙˆØ§Ù†</label><input type="text" class="ans"></div>
            <div class="field"><label>Ù†Ø¨Ø§Øª</label><input type="text" class="ans"></div>
            <div class="field"><label>Ø¬Ù…Ø§Ø¯</label><input type="text" class="ans"></div>
            <div class="field"><label>Ø¨Ù„Ø§Ø¯</label><input type="text" class="ans"></div>
        </div>
        <button class="btn btn-pink" onclick="socket.emit('player_stopped')">STOP !</button>
    </div>
</div>

<script>
    const socket = io();
    let myNick = "";

    function joinGame() {
        myNick = document.getElementById('nick-input').value;
        if(myNick.trim() != "") {
            socket.emit('join_game', myNick);
            document.getElementById('menu-screen').style.display = 'none';
            document.getElementById('lobby-screen').style.display = 'block';
        }
    }

    function sendReady() {
        socket.emit('player_ready');
        document.getElementById('ready-btn').disabled = true;
        document.getElementById('ready-btn').innerText = "ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© âœ“";
        document.getElementById('ready-btn').style.background = "#333";
    }

    socket.on('update_players', (players) => {
        const list = document.getElementById('player-list');
        list.innerHTML = "";
        Object.values(players).forEach(p => {
            list.innerHTML += `
                <div class="player-item">
                    <span>${p.name}</span>
                    <span class="${p.ready ? 'status-ready' : 'status-waiting'}">
                        ${p.ready ? 'Ø¬Ø§Ù‡Ø² âœ“' : 'ÙŠÙ†ØªØ¸Ø±...'}
                    </span>
                </div>`;
        });
    });

    socket.on('start_countdown', () => {
        let count = 3;
        document.getElementById('lobby-msg').innerText = "Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ " + count;
        let itv = setInterval(() => {
            count--;
            if(count <= 0) {
                clearInterval(itv);
                document.getElementById('lobby-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'block';
                // Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ù‡Ù†Ø§...
            } else {
                document.getElementById('lobby-msg').innerText = "Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ " + count;
            }
        }, 1000);
    });

    socket.on('stop_game_forall', () => {
        alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©!");
        document.querySelectorAll('.ans').forEach(i => i.disabled = true);
    });
</script>
</body>
</html>
